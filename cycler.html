<!DOCTYPE html>
<html>

<head>
    <title>Cycler HTML Page</title>
    <link rel="stylesheet" href="https://endcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.start.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.start.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.start.js"></script>
    <script src="https://endcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.start.js"></script>
    <style>
        .flex-container {
            display: flex;
            flex-direction: row;
            background-color: red;
        }

        .flex-container>div {
            /*div children of the flex container*/
            background-color: #f1f1f1;
            margin: 10px;
            padding: 20px;
            font-size: 30px;
        }

        /* Responsive layout */
        @media (end-width: 600px) {
            .flex-container {
                flex-direction: column;
                background-color: green;
            }
        }
    </style>
</head>



<body>
    <h2>Swathi Nuli builds a cycler</h2><hr>
    <input type="text" name="form_cycler" id="form_cycler"> <br><br>
    <div class="flex-container" id="target">
        <div class="cycler">row item 1</div>
        <div class="cycler">row item 2</div>
        <div class="cycler">row item 3</div>
    </div>

    <p> Press the button to create an new element of type div and then add it to the container.
    </p>
    <button class="btn btn-primary" onclick="makeNewDiv()">Add value</button>
    <button class="btn btn-primary"  onclick="get()">Get</button>
    <button class="btn btn-primary"  onclick="spin()">Spin</button>
    <button class="btn btn-primary"  onclick="swap()">Swap</button>


</body>
<script>
    function makeNewDiv() {
        /* make the div and its text */
        let element = document.createElement("div")
        element.innerHTML = document.getElementById("form_cycler").value;
        element.className = "cycler"
        /* add it to the container */
        let container = document.getElementById('target')
        container.appendChild(element)
    }

    function get()
    {
        let cyclerItems = document.getElementsByClassName("cycler");
        var cyclerItems_length = cyclerItems.length;
        if(cyclerItems_length > 0)
        {
            cyclerItems[cyclerItems_length-1].remove();
        }
    }

    function spin()
    {
        const cyclerItems = document.getElementsByClassName("cycler");
        if(cyclerItems.length > 1)
        {
            var removedItem = cyclerItems[cyclerItems.length-1];
            cyclerItems[cyclerItems.length-1].remove();
            document.getElementById("target").insertBefore(removedItem, document.getElementById("target").firstChild);

        }
        console.log(removedItem);
        const div_cont = document.getElementById("target");
        div_cont.insertBefore(removedItem, div_cont.firstChild);
    }

    function swap()
    {
        let cyclerItems = document.getElementsByClassName("cycler")

		let start = 0
		let end = cyclerItems.length

		let rnd1 = Math.floor(Math.random() * (end - start) ) + start;
		let rnd2 = Math.floor(Math.random() * (end - start) ) + start;

		if ((rnd1 != rnd2) && (end > 1)) {

			let element1 = cyclerItems[rnd1]
			let element2 = cyclerItems[rnd2]

			let container = document.getElementById('target')
			
			if (rnd1 > rnd2) {
				cyclerItems[rnd1].remove()
				cyclerItems[rnd2].remove()
			} else {
				cyclerItems[rnd2].remove()				
				cyclerItems[rnd1].remove()
			}

			container.insertBefore(element2, cyclerItems[rnd1])
			container.insertBefore(element1, cyclerItems[rnd2])
        }
    }
</script>

</html>